# Основные команды третьего семинара

> **git clone <url-адрес репозитория>** - – клонирование внешнего репозитория на локальный ПК

> **git pull** - получение изменений и слияние с локальной версией


# Синтаксис Git

## Начало работы

программа устанавливается с оффициального сайта

```PowerShell
> git --version - проверка наличия и версионности
> git config --list - выводит список настроек
> git config --global user.name "имя"- задает имя пользователя
> git config --global user.email "имя"- задает почту пользователя
> git help <команда> - выводит справку по команде
> git <команда> --help - выводит справку по команде
```
--global - используется для общей настройке на компьютере, для отдельного проекта не надо использовать --global


## Работа с репозиторием



```PowerShell
> git init - создание локального репозитория .git
> git clone <HTTP-ссылка на репозиторий проекта> - клонировать все файлы с сервера на свой компьютер
> git status - проверка статуса репозитория
> git diff - проверяет разницу между индексированной версией и текущей, показывает новые неиндексированные.  вставки в программу. не работает, если изменения сохранены
чтобы выйти из команды diff надо нажать Q
> git diff --staged - показывает различия между индексированными данными в текущей версии и сохраненной
> git diff --cashed - покажет проиндексированные изменения
```
## Игнорирование файлов
Создается файл .gitignore

правила оформления:

* \# комментарий - это игнорируется
* работают стандартные глоальные паттерны
* паттерны можно заканчивать (/), указывая папку
* можно инвертирвоать паттерн, начав со знака (!)

пример:
* \*.а - игнорируются все файлы заканчивающиеся на .а
* \!lib.a - но отслеживать файлы lib.a
* build/ - игнорировать все файлы в папке build/





## способы отслеживания


```PowerShell
> git add <ссылка и/или имя файла> - добавить конкретный файл к индексации, или добавить несколько необходимых файлов через пробел (LICENCE readme.txt info.md)
> git add . - добавить все файлы к отслеживанию
> git add *.txt - добавить все файлы .txt к отслеживанию
```

## Сохранение

```PowerShell
> git commit -m "текст в кавычках" - сохраняет данные с сообщением
> git commit -am "текст в кавычках" - добавляет файл в индексацию и сохраняет данные с сообщением
> git rm - убирает из индексации и УДАЛЯЕТ файл
> git rm --cashed - убирает из индексации
> git commit -amend - отмена последнего изменения, замена сообщения коммита и созранение
> git reset HEAD <имя файла> - отмена индексирования
> git checkout -- <имя файла> - отмена внесенных изменений
```



## История изменений
```PowerShell
> git log - выводит историю сохранений
> git log -p -2 - показывает разницу между двумя последними изменениями
> git log --stat - показывает разницу между суммирующими параметрами
> git log --pretty=oneline - выводит каждый коммит в одну строку
> git log --pretty=format:"%h - %an, %ar : %s" - выводит историю в заданном формате
> git log --graph - показывает историю версий и слияний
```

|Параметр|Описание|
|-|----|
|-p|Показывает изменения, внесенные в каждую версию|
|--stat|Показывает статистику измененных файлов в каждом  
коммите|
|--shortstat|Показывает только строку с изменениями/вставками/удалениями от команды --stat|
|--name-only|Показывает список измененных файлов после информации о коммите|
|--name-status|Показывает список измененных файлов с информацией о добавлении/изменении/удалении|
|--abbrev-commit|Показывает только первые несколько символов контрольной суммы SHA-1 вместо всех 40|
|--relative-date|Показывает дату не в полном, а в относительном формате (например, «2 недели назад»)|
|--graph|Показывает ASCII-граф истории ветвлений и слияний вместе с выводом команды log|
|--pretty|Показывает коммиты в альтернативном формате. Возможны параметры oneline, short, full, fuller и format (с указанием вашей версии формата)|



|Параметр|Описание|
|-|-----|
|-(n)| Показывает только последние n коммитов|
|--since, --after| Показывает только коммиты, внесенные после указанной даты|
|--until, --before|Показывает только коммиты, внесенные до указанной даты|
|--author|Показывает только коммиты определенного автора|
|--committer|Показывает только коммиты, внесенные определенным участником|
|--grep|Показывает только коммиты с сообщением фиксации, 
содержащим указанную строку|
|-S|Показывает только коммиты, в которых добавленный или удаленный код совпадает с указанной строкой|

### Описание выводимых данных:
|Кода|Описание|
|-|----|
|%H | хешкод коммита|
| %h | сокращенный хешкод|
| %T | хешкод дерева|
| %t | сокращенный хешкод дерева|
| %P | хешкод родительских коммитов|
| %p | сокращенный хешкод родительских коммитов|
| %an | имя автора|
| %ae | эл почта автора|
| %ad | дата создания оригинала|
| %ar | дата создания оригинала, в относительной форме|
| %cn | имя создателя версии|
| %ce | эл почта создателя версии|
| %cd | дата создания версии|
| %cr | дата создания версии в относительном форате|
| %s | комментарий|

## Перемещение
гит в явном виде не отслеживает преемещение файлов, однако функция присутствует и она используется для переименования. команда эквивалентна командам git rm и git add

```PowerShell
> git mv старое_название новое_название - переименование файла
```



## Работа с удаленными репозиториями

```PowerShell
> git remote - показывает список подключенных серверов
> git remote -v - показывает URL адреса
> git remote add (сокращенное имя)(url) - добавление удаленного репозитория
> git fetch (сокращенное имя) - скачивание всего репозитория по сокращенному имени, также используется для синхронизации
> git pull - автоматическое извлечение из удаленной ветки и слияние
> git push (имя сервера)(имя ветки) - отправка данных на сервер
> git remote show (имя сервера) - получение инфы о удаленном репохитории
> git remote rename (старое имя) (новое имя) - переименовани сокращенного имени
> git remote rm (имя) - удаление ссылки на репоиторий
```



## Теги

```PowerShell
> git tag - просмотр списка тегов
> git tag -1 , (версия) - поиск по шаблону
> git tag -a (v1.4) -m "текст" - создание тега для версии
> git show (версия) - прсомотр данныз тега
> git tag v1.4-lw - создать легковесный тег
> git show v1.4-lw - посмотреть легковесный тег
> git tag -a v1.2 (хеш код коммита) - добавление тега к существующему коммиту
> git push (имя сревера)(имя тега) - отправка тега на уаленный сервер
> git push (имя сервера) --tags - отправка всех тегов


```


## Псевдонимы
задаются через alias
``` PowerShell
> git config --global alias.co checkout - заменяет соманду checkout на co
> git config --global alias.last 'log -1 HEAD' - создает новую команду last которая выполняет несколько команд
```



## Ветвление
master - главная ветка

```PowerShell
> git branch - список веток
> git branch (имя) - создание новой ветки
> git log --oneline --decorate - показать куда нацелены указатели веток
> git checkout (имя) - переход на другую ветку
> git checkout -b (имя) - создание и переход на новую ветку
> git merge (имя новой ветки) - слияние указанной с текущей (перед этим надо вернутся на master)
> git branch -d (имя ветки) - удаление ветки
```




## Отправка данных

```PowerShell
> git push (удаленный сервер) (ветка) - отправка на сервер
> git checkout -b (имя ветки) (имя удаленного сервера)/(имя удаленной ветки) - создание новой (локальной) ветки через копирование ветки с сервера
> git checkout --track (имя удаленного сервера)/(имя удаленной ветки) - команда отслеживания ветки
> git fetch --all - извлечение данных со всех удаленных серверов
> git branch -vv - показывает список отслеживаемых веток
> git push (имя сервера) --delete (имя ветки) - убрать удаленную ветку
```


## Перемещение

```PowerShell
> git rebase (имя ветки) - позволяет переписать коммит поверх предыдущего, перед этим необходимо перейти на необходимую ветку ерез checkout
> 
```