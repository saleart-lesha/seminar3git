git status - текущий статус
git add <file> - добавить файл к будущему коммиту
git commit - записать коммит
git commit - m 'commit message' - записать коммит с сообщением



*Создание git репозитория:*
1. Переходим в папку с проектом
2. git init
3. Добавляем в индекс существующие файлы git add *.c
4. git commit -m 'initial project version'



*Клонирование git репозитория:*
git clone https://github.com/libgit2/libgit2
или git clone https://github.com/libgit2/libgit2 mylibgit



*Просмотр всех настроек:*
git config --list --show-origin
Первичная настройка git:
$ git config --global user.name "User"
$ git config --global user.email user@user.test



*Коммиты:*
Чтобы посмотреть есть ли изменения в репозитории, нужно выполнить команду 
git status

Чтобы добавить файл в индекс надо выполнить команду 
git add *.*
git add . (все файлы)

Чтобы удалить файл из индекса надо выполнить команду
git rm --cached *.*

Коммит производится командой 
git commit
При этом откроется текстовый редактор для указания описания коммита

Можно также закоммитить командой 
git commit -m 'сообщение'
git commit -a (сразу добавляет файлы для загрузки)
git commit -am 'сообщение'



*Файлы для указания импорта/игнорирования*
.gitkeep - нужно создать в пустой папке для загрузки ее в репозиторий
.gitignore - для исключения файлов из загрузки. Можно создать в корневой папке репозитория для применения ко всем подпапкам либо в конкретной подпапке для применения к файлам только в ней.



Просмотр истории коммитов:
git log
git log --oneline

Откат в предыдущему коммиту:
git reset hash коммита

Полная история всех операций с откатами:
git reflog

Отменить изменения сделанные коммитом:
git revert hash коммита

Сброс состояния файла на состояние из последнего коммита:
git restore название файла



Просмотр всех веток:
git branch

Создание ветки:
git branch dev

Переключение на ветку:
git checkout dev

Создание ветки не от той где находишься:
git branch новая_ветка старая_ветка

Создание ветки и переключение на нее:
git checkout -b новая_ветка



Публикация репозитория:
Генерируем ssh-ключ ssh-keygen
Добавляем ключ на github в настройках профиля

Добавление связи между локальным репозиторием и на github:
git remote add origin url_репозитория

Просмотр связей у локального репозитория с удаленным:
git remote -v


Клонировать репозиторий:
1. В параметрах репозитория на github нажимаем клонировать, копируем ssh-адрес
2. git clone адрес папка_для_репозитория


Загрузка изменений из локального репозитория в удаленный:
git push <remote-name>(origin) <branch-name>

Загрузка созданной локально ветки на удаленный репозиторий:
git push -u origin ветка

Удаление связи с удаленным репозиторием:
git remote rm <remote-name>(origin)

Просмотр удаленого репозитория:
git remote show origin


Скачивание последних обновлений ветки:
git pull

Подгрузка обновлений из репозитория (в том числе новых веток):
git fetch



Загрузка данных из ветки в основную:
git merge ветка

Удаление веток локально:
git branch -d ветка1 ветка2

Удаление веток на удаленном репозитории:
git push --delete origin ветка1 ветка2



Смещение начала ветки относительно master:
git rebase master

После этого можно изменить это на удаленном репозитории:
git push --force



Пометить последний комит как номер версии:
git tag 1.0

Загрузить в удаленный репозиторий теги:
git push --tags

Удалить тег:
git tag -d 1.0

Удалить тег на удаленном репозитории:
git push --delete origin 1.0



Stash - локальное пространство, хранящее все изменения, отменяя состояние репозитория
Выгрузить изменения во временное хранилище:
git stash
Создаем специальный стеш коммит, не попадающий в общую историю, но который можно восстановить

Просмотр всех текущих стешей:
git stash list

Добавить в существующий стеш на текущей ветке новый файл:
git stash push имя_файла

Развернуть стеш на ветку:
git stash pop имя_стеша



Если в дополнительной ветке коммитов много и нужно залить из нее изменения в основную, предварительно коммиты можно склеить. Это позволит в случае проблемы с данными откатить только один коммит.

Мердж без создания объединяющего коммита:
1. Перейти в основную ветку
2. git merge имя_ветки --squash

Сброс репозитория на последний коммит:
git reset --hard

Объединение коммитов в ветке:
git rebase HEAD~количество_коммитов
или для управление склеиванием:
git rebase -i HEAD~количество_коммитов

Дальше нужно перезаписать историю:
git push --force



Перенос коммита с одной ветки на другую:
git cherry-pick <commit> - перенести коммит на текущую ветку
git cherry-pick <branch> - перенести последний коммит с ветки
git cherry-pick..<branch> - перенести все коммиты с ветки



Перезапись последнего коммита:
git commit --amend

Для перезаписи коммита на удаленном репозитории тоже:
git push --force



Исправление конфликтов
Отмена мерджа, который приостановлен:
git merge --abort

Можно отредактировать файл, в котором возник конфликт, после чего нужно добавить файл в индекс и закоммитить изменения.
